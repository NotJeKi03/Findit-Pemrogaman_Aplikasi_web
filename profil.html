<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>FindIt - Profil</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <script src="https://unpkg.com/feather-icons"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              "findit-blue": "#008ECC",
            },
            fontFamily: {
              poppins: ["Poppins", "sans-serif"],
            },
          },
        },
      };
    </script>
  </head>

  <body class="font-poppins bg-gray-50">
    <!-- Header -->
    <header
      class="bg-white shadow-sm p-3 flex items-center justify-between fixed top-0 left-0 right-0 z-50"
    >
      <!-- Logo aligned to the left -->
      <img src="logo.png" alt="Logo FindIt" class="w-32 h-auto" />

      <!-- Navigation Menu in the Center -->
      <nav class="flex-grow flex justify-center">
        <ul class="flex space-x-6">
          <li>
            <a
              href="caripage.html"
              id="beranda-link"
              class="text-black font-medium px-3 py-2 rounded hover:text-findit-blue"
              onclick="disableButton('beranda-link')"
              >Beranda</a
            >
          </li>
          <li>
            <a
              href="tentang.html"
              id="tentang-link"
              class="text-black font-medium px-3 py-2 rounded hover:text-findit-blue"
              onclick="disableButton('tentang-link')"
              >Tentang</a
            >
          </li>
          <li>
            <a
              href="kontak.html"
              id="kontak-link"
              class="text-black font-medium px-3 py-2 rounded hover:text-findit-blue"
              onclick="disableButton('kontak-link')"
              >Kontak</a
            >
          </li>
        </ul>
      </nav>

      <!-- Notification and Account Icons aligned to the right -->
      <div class="flex items-center space-x-4">
        <a
          href="notifikasi.html"
          id="Notif button"
          class="text-black hover:text-findit-blue"
        >
          <i data-feather="bell"></i>
        </a>
        <a
          href="profil.html"
          id="Akun button"
          class="text-black hover:text-findit-blue"
        >
          <i data-feather="user"></i>
        </a>
      </div>
    </header>

    <!-- Main Content -->
    <main class="pt-20 pb-16 min-h-screen">
      <div class="max-w-md mx-auto bg-white rounded-lg shadow-lg p-6 mt-8">
        <!-- Profile Header -->
        <div class="text-center mb-3">
          <h1 class="text-2xl font-bold text-gray-800">Edit Profil</h1>
          <div class="flex items-center justify-center mt-4"></div>
        </div>

        <!-- Edit Profile Form -->
        <form id="profileForm" class="space-y-4">
          <div>
            <label
              for="name"
              class="block text-sm font-medium text-gray-700 mb-1"
              >Nama</label
            >
            <input
              type="text"
              id="name"
              name="name"
              class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-findit-blue focus:border-transparent"
              placeholder="Masukkan nama Anda"
              required
            />
          </div>

          <div>
            <label
              for="email"
              class="block text-sm font-medium text-gray-700 mb-1"
              >Email</label
            >
            <input
              type="email"
              id="email"
              name="email"
              class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-findit-blue focus:border-transparent"
              placeholder="Masukkan email Anda"
              required
            />
          </div>

          <div>
            <label
              for="password"
              class="block text-sm font-medium text-gray-700 mb-1"
              >Kata Sandi</label
            >
            <input
              type="password"
              id="password"
              name="password"
              class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-findit-blue focus:border-transparent"
              placeholder="Masukkan kata sandi baru (opsional)"
            />
          </div>

          <button
            type="submit"
            class="w-full bg-findit-blue text-white py-2 px-4 rounded-md hover:bg-[#0066a3] transition duration-300 font-medium"
          >
            Simpan
          </button>
        </form>

        <!-- Logout Button -->
        <div class="mt-6 pt-4 border-t border-gray-200">
          <button
            id="logoutBtn"
            class="flex items-center text-red-600 hover:text-red-700 font-medium"
          >
            <i data-feather="log-out" class="w-4 h-4 mr-2"></i>
            Keluar
          </button>
        </div>
      </div>
    </main>

    <!-- Footer -->
    <footer class="bg-findit-blue text-white py-12">
      <div class="max-w-6xl mx-auto px-6">
        <div class="grid md:grid-cols-3 gap-8">
          <!-- Company Info -->
          <div>
            <div class="footer-logo flex items-center mb-6">
              <h2 class="text-3xl font-bold text-white">FindIt</h2>
            </div>

            <div class="space-y-3 mb-6 text-center md:text-left">
              <h4 class="font-semibold mb-4">Kontak Kami</h4>
              <div class="flex items-center space-x-3">
                <i data-feather="message-circle" class="w-4 h-4"></i>
                <div>
                  <p class="text-sm">WhatsApp</p>
                  <p class="text-sm">+1 202-918-2132</p>
                </div>
              </div>
              <div class="flex items-center space-x-3">
                <i data-feather="phone" class="w-4 h-4"></i>
                <div>
                  <p class="text-sm">Call Us</p>
                  <p class="text-sm">+1 202-918-2132</p>
                </div>
              </div>
            </div>

            <div class="mt-6">
              <h4 class="font-semibold mb-4">Download App</h4>
              <div
                class="app-download flex space-x-3 justify-center md:justify-start"
              >
                <a href="#" class="flex items-center space-x-2">
                  <img
                    src="https://developer.apple.com/assets/elements/badges/download-on-the-app-store.svg"
                    alt="App Store"
                    class="h-10 cursor-pointer hover:opacity-80 transition-opacity"
                  />
                </a>
                <a href="#" class="flex items-center space-x-2">
                  <img
                    src="https://play.google.com/intl/en_us/badges/static/images/badges/en_badge_web_generic.png"
                    alt="Google Play"
                    class="h-10 cursor-pointer hover:opacity-80 transition-opacity"
                  />
                </a>
              </div>
            </div>
          </div>

          <!-- Customer Service -->
          <div>
            <h4 class="font-semibold mb-6">Layanan Pelanggan</h4>
            <ul class="space-y-3">
              <li>
                <a
                  href="tentang.html"
                  class="text-sm hover:opacity-80 transition-opacity"
                  >Tentang Kami</a
                >
              </li>
              <li>
                <a href="#" class="text-sm hover:opacity-80 transition-opacity"
                  >Syarat & Ketentuan</a
                >
              </li>
              <li>
                <a href="#" class="text-sm hover:opacity-80 transition-opacity"
                  >Kebijakan Privasi</a
                >
              </li>
              <li>
                <a href="#" class="text-sm hover:opacity-80 transition-opacity"
                  >Pusat Bantuan</a
                >
              </li>
              <li>
                <a href="#" class="text-sm hover:opacity-80 transition-opacity"
                  >Pertanyaan Umum</a
                >
              </li>
            </ul>
          </div>

          <!-- Popular Categories -->
          <div>
            <h4 class="font-semibold mb-6">Kategori Terpopuler</h4>
            <ul class="space-y-3">
              <li>
                <a href="#" class="text-sm hover:opacity-80 transition-opacity"
                  >Cari Barang Hilang</a
                >
              </li>
              <li>
                <a href="#" class="text-sm hover:opacity-80 transition-opacity"
                  >Laporkan Temuan</a
                >
              </li>
            </ul>
          </div>
        </div>

        <!-- Footer Divider -->
        <div
          class="footer-divider border-t border-white border-opacity-20 mt-8 pt-6 text-center"
        >
          <p class="text-sm opacity-80">
            Â© 2025 FindIt. Hak cipta dilindungi undang-undang.
          </p>
        </div>
      </div>
    </footer>

    <!-- Success Modal -->
    <div
      id="successModal"
      class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden"
    >
      <div class="bg-white rounded-lg p-6 max-w-sm w-full mx-4">
        <div class="text-center">
          <div
            class="w-16 h-16 mx-auto mb-4 bg-green-100 rounded-full flex items-center justify-center"
          >
            <i data-feather="check" class="w-8 h-8 text-green-600"></i>
          </div>
          <h3 class="text-lg font-semibold text-gray-800 mb-2">
            Berhasil Keluar
          </h3>
          <p class="text-gray-600 mb-4">
            Anda telah berhasil keluar dari akun. Terima kasih telah menggunakan
            FindIt!
          </p>
          <button
            id="successOk"
            class="bg-findit-blue text-white px-6 py-2 rounded-md hover:bg-blue-600 transition duration-300"
          >
            OK
          </button>
        </div>
      </div>
    </div>

    <!-- Profile Update Success Modal -->
    <div
      id="profileSuccessModal"
      class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden"
    >
      <div class="bg-white rounded-lg p-6 max-w-sm w-full mx-4">
        <div class="text-center">
          <div
            class="w-16 h-16 mx-auto mb-4 bg-green-100 rounded-full flex items-center justify-center"
          >
            <i data-feather="check" class="w-8 h-8 text-green-600"></i>
          </div>
          <h3 class="text-lg font-semibold text-gray-800 mb-2">
            Profile Updated!
          </h3>
          <p class="text-gray-600 mb-4">
            Profil Anda telah berhasil diperbarui.
          </p>
          <button
            id="profileSuccessOk"
            class="bg-findit-blue text-white px-6 py-2 rounded-md hover:bg-blue-600 transition duration-300"
          >
            OK
          </button>
        </div>
      </div>
    </div>

    <!-- Logout Confirmation Modal -->
    <div
      id="logoutModal"
      class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden"
    >
      <div class="bg-white rounded-lg p-6 max-w-sm w-full mx-4">
        <div class="text-center">
          <h3 class="text-lg font-semibold text-gray-800 mb-2">
            Konfirmasi Keluar
          </h3>
          <p class="text-gray-600 mb-6">
            Apakah Anda yakin ingin keluar dari akun?
          </p>
          <div class="flex space-x-3 justify-center">
            <button
              id="cancelLogout"
              class="px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 transition duration-300"
            >
              Batal
            </button>
            <button
              id="confirmLogout"
              class="px-4 py-2 bg-[#008ECC] text-white rounded-md hover:bg-[#008ECC] transition duration-300"
            >
              Ya, Keluar
            </button>
          </div>
        </div>
      </div>
    </div>

    <script>
      // Initialize Feather icons
      feather.replace();

      // Load existing profile data (if any)
      window.addEventListener("DOMContentLoaded", function () {
        // You can load existing profile data here from your backend
        // For now, this is just a placeholder
      });

      // Profile form submission
      document
        .getElementById("profileForm")
        .addEventListener("submit", function (e) {
          e.preventDefault();

          const formData = new FormData(this);

          // Send data to update_profile.php
          fetch("update_profile.php", {
            method: "POST",
            body: formData,
          })
            .then((response) => response.json())
            .then((data) => {
              if (data.success) {
                document
                  .getElementById("profileSuccessModal")
                  .classList.remove("hidden");
              } else {
                alert("Terjadi kesalahan: " + data.message);
              }
            })
            .catch((error) => {
              console.error("Error:", error);
              alert("Terjadi kesalahan saat memperbarui profil");
            });
        });

      // Profile success modal OK button
      document
        .getElementById("profileSuccessOk")
        .addEventListener("click", function () {
          document
            .getElementById("profileSuccessModal")
            .classList.add("hidden");
        });

      // Logout button click
      document
        .getElementById("logoutBtn")
        .addEventListener("click", function () {
          document.getElementById("logoutModal").classList.remove("hidden");
        });

      // Cancel logout
      document
        .getElementById("cancelLogout")
        .addEventListener("click", function () {
          document.getElementById("logoutModal").classList.add("hidden");
        });

      // Confirm logout
      document
        .getElementById("confirmLogout")
        .addEventListener("click", function () {
          document.getElementById("logoutModal").classList.add("hidden");

          // Send logout request to server
          fetch("logout.php", {
            method: "POST",
          })
            .then((response) => response.json())
            .then((data) => {
              document
                .getElementById("successModal")
                .classList.remove("hidden");
            })
            .catch((error) => {
              console.error("Error:", error);
              document
                .getElementById("successModal")
                .classList.remove("hidden");
            });
        });

      // Success modal OK button
      document
        .getElementById("successOk")
        .addEventListener("click", function () {
          document.getElementById("successModal").classList.add("hidden");
          window.location.href = "login.html";
        });

      // Disable button function (for navigation)
      function disableButton(linkId) {
        // Remove active class from all links
        const links = document.querySelectorAll("nav a");
        links.forEach((link) => {
          link.classList.remove("text-findit-blue");
          link.classList.add("text-black");
        });

        // Add active class to clicked link
        const activeLink = document.getElementById(linkId);
        activeLink.classList.remove("text-black");
        activeLink.classList.add("text-findit-blue");
      }
    </script>
  </body>
</html>
